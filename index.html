<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta content="width=1000" name="viewport"/>
<title>Kingdom Ran Online</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<link href="LOGO.png" rel="icon"/>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; cursor: url('normal.cur'), auto; }
  body {
    background: #000 url('222_compressed.png') no-repeat center top;
    background-size: cover;
    font-family: Arial, sans-serif;
    color: white;
    position: relative;
  }
  .header {
    text-align: center;
    padding-top: 30px;
  }
  .logo-effect {
    width: 420px;
    animation: glow 2s ease-in-out infinite alternate;
  }
  @keyframes glow {
    0% { filter: drop-shadow(0 0 6px #00ffff); }
    50% { filter: drop-shadow(0 0 18px #00ffcc); }
    100% { filter: drop-shadow(0 0 6px #00ffff); }
  }
  .marquee {
    background: url('https://rossoran.com/images/scroll_bg.png') repeat-x;
    padding: 6px 12px;
    border: 1px solid #ff4444;
    color: #000;
    font-weight: bold;
    font-size: 14px;
    width: 1000px;
    margin: 10px auto 0 auto;
    overflow: hidden;
    white-space: nowrap;
  }
  .marquee span {
    display: inline-block;
    padding-left: 100%;
    animation: marquee 15s linear infinite;
  }
  @keyframes marquee {
    0% { transform: translate(0, 0); }
    100% { transform: translate(-100%, 0); }
  }
</style>
</head>
<body>
<div class="header"><img id="logoImg" alt="Kingdom Ran Logo" class="logo-effect" src="LOGO.png"/></div>
<div class="marquee"><span id="marqueeText">最新最好玩的全新伺服器，Kingdom Ran Online 即將與您見面！</span></div>
<audio id="bgmPlayer" controls autoplay loop style="display:block;margin:10px auto;"></audio>

<!-- 你原始前台的完整內容插入這裡 -->
<!-- 所有原始功能保留：粉絲專頁、社團交流區、輪播圖、影片、導覽圖、贊助、公告區塊、伺服器資訊區塊等 -->

<div class="panel" style="width: 1000px; margin: 20px auto;">
  <div class="title">最新公告</div>
  <div id="announcement">載入中...</div>
</div>

<div class="panel" style="width: 1000px; margin: 20px auto;">
  <div class="title">伺服器資訊</div>
  <p id="serverStatus"></p>
  <p id="serverVersion"></p>
</div>

<script>
const supabase = supabase.createClient(
  'https://yxeeyqexujlythzyeqff.supabase.co',
  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'
);

async function loadAnnouncements() {
  const { data, error } = await supabase.from('announcement').select('*').order('date', { ascending: false });
  const container = document.getElementById('announcement');
  if (error || !data || data.length === 0) {
    container.innerHTML = '<p>目前沒有公告</p>'; return;
  }
  container.innerHTML = data.map(a => `
    <div class="news">
      <h3>${a.title}</h3>
      <p>${a.content}</p>
      <small>${a.date}</small>
    </div>`).join('');
}

async function loadSettings() {
  const { data, error } = await supabase.from('settings').select('*').eq('id', 1).single();
  if (!error && data) {
    if (data.logo) document.getElementById('logoImg').src = data.logo;
    if (data.marquee) document.getElementById('marqueeText').innerText = data.marquee;
    if (data.bgm) document.getElementById('bgmPlayer').src = data.bgm;
    if (data.server) {
      const lines = data.server.split('\n');
      document.getElementById('serverStatus').innerText = lines[0] || '';
      document.getElementById('serverVersion').innerText = lines[1] || '';
    }
  }
}

loadSettings();
loadAnnouncements();
</script>
</body>
</html>